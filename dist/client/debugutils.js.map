{"version":3,"sources":["debugutils.js"],"names":["renderjson","set_icons","set_show_to_level","inspecting","inspector","window","DEBUGUTILS_REFRESH","addEventListener","document","getElementById","lastTime","refresh","time","innerHTML","appendChild","requestAnimationFrame","inspect","obj","depth","DEBUGGING","setTimeout","stopInspecting","style","visibility","e","code"],"mappings":"AAAA,OAAOA,UAAP,MAAuB,cAAvB;AAEAA,UAAU,CAACC,SAAX,CAAqB,GAArB,EAA0B,GAA1B;AACAD,UAAU,CAACE,iBAAX,CAA6B,CAA7B;AAEA,IAAIC,UAAJ;AACA,IAAIC,SAAJ;AACAC,MAAM,CAACC,kBAAP,GAA4B,KAA5B;AAEAD,MAAM,CAACE,gBAAP,CAAwB,MAAxB,EAAgC,YAAY;AAC1CH,EAAAA,SAAS,GAAGI,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAZ;AACD,CAFD;AAIA,IAAIC,QAAQ,GAAG,CAAf;;AACA,SAASC,OAAT,CAAiBC,IAAjB,EAAuB;AACrB,MAAIT,UAAU,IAAIE,MAAM,CAACC,kBAArB,IAA2CM,IAAI,GAAGF,QAAP,GAAmB,IAAI,EAAL,GAAW,IAA5E,EAAkF;AAChF,QAAIN,SAAJ,EAAe;AACbA,MAAAA,SAAS,CAACS,SAAV,GAAsB,EAAtB;AACAT,MAAAA,SAAS,CAACU,WAAV,CAAsBd,UAAU,CAACG,UAAD,CAAhC;AACAY,MAAAA,qBAAqB,CAACJ,OAAD,CAArB;AACD;;AACDD,IAAAA,QAAQ,GAAGE,IAAX;AACD;AACF;;AAED,OAAO,SAASI,OAAT,CAAiBC,GAAjB,EAAsBC,KAAK,GAAG,CAA9B,EAAiCN,IAAI,GAAG,KAAK,IAA7C,EAAmD;AACxD,MAAI,CAACP,MAAM,CAACc,SAAZ,EAAuB;AACrB;AACD;;AAEDhB,EAAAA,UAAU,GAAGc,GAAb;AACAP,EAAAA,QAAQ,GAAG,CAAX;AACAL,EAAAA,MAAM,CAACC,kBAAP,GAA4B,IAA5B;AAEAN,EAAAA,UAAU,CAACE,iBAAX,CAA6BgB,KAA7B;AACAP,EAAAA,OAAO,CAAC,IAAD,CAAP;AAEAS,EAAAA,UAAU,CAACC,cAAD,EAAiBT,IAAjB,CAAV;AACD;AAED,OAAO,SAASS,cAAT,CAAwBJ,GAAxB,EAA6B;AAClCd,EAAAA,UAAU,GAAG,IAAb;AACAC,EAAAA,SAAS,CAACS,SAAV,GAAsB,EAAtB;AACAH,EAAAA,QAAQ,GAAG,CAAX;AACD;AAEDF,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCa,KAAjC,CAAuCC,UAAvC,GAAoD,QAApD;AACAf,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCa,KAArC,CAA2CC,UAA3C,GAAwD,QAAxD;AAEAf,QAAQ,CAACD,gBAAT,CAA0B,SAA1B,EAAqC,UAAUiB,CAAV,EAAa;AAChD,MAAIA,CAAC,CAACC,IAAF,IAAU,MAAd,EAAsB;AACpBpB,IAAAA,MAAM,CAACc,SAAP,GAAmB,IAAnB;AACAX,IAAAA,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCa,KAAjC,CAAuCC,UAAvC,GAAoD,SAApD;AACAf,IAAAA,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCa,KAArC,CAA2CC,UAA3C,GAAwD,SAAxD;AACD;AACF,CAND;AAQAf,QAAQ,CAACD,gBAAT,CAA0B,SAA1B,EAAqC,UAAUiB,CAAV,EAAa;AAChD,MAAIA,CAAC,CAACC,IAAF,IAAU,MAAd,EAAsB;AACpBpB,IAAAA,MAAM,CAACc,SAAP,GAAmB,IAAnB;AACAd,IAAAA,MAAM,CAACC,kBAAP,GAA4B,KAA5B;AACAE,IAAAA,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCa,KAAjC,CAAuCC,UAAvC,GAAoD,QAApD;AACAf,IAAAA,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCa,KAArC,CAA2CC,UAA3C,GAAwD,QAAxD;AACD;AACF,CAPD","sourcesContent":["import renderjson from \"./renderjson\"\n\nrenderjson.set_icons(\"+\", \"-\")\nrenderjson.set_show_to_level(1)\n\nlet inspecting\nlet inspector\nwindow.DEBUGUTILS_REFRESH = false\n\nwindow.addEventListener(\"load\", function () {\n  inspector = document.getElementById(\"debugjson\")\n})\n\nlet lastTime = 0\nfunction refresh(time) {\n  if (inspecting && window.DEBUGUTILS_REFRESH && time - lastTime > (1 / 15) * 1000) {\n    if (inspector) {\n      inspector.innerHTML = \"\"\n      inspector.appendChild(renderjson(inspecting))\n      requestAnimationFrame(refresh)\n    }\n    lastTime = time\n  }\n}\n\nexport function inspect(obj, depth = 1, time = 60 * 1000) {\n  if (!window.DEBUGGING) {\n    return\n  }\n\n  inspecting = obj\n  lastTime = 0\n  window.DEBUGUTILS_REFRESH = true\n\n  renderjson.set_show_to_level(depth)\n  refresh(1000)\n\n  setTimeout(stopInspecting, time)\n}\n\nexport function stopInspecting(obj) {\n  inspecting = null\n  inspector.innerHTML = \"\"\n  lastTime = 0\n}\n\ndocument.getElementById(\"debug\").style.visibility = \"hidden\"\ndocument.getElementById(\"debugjson\").style.visibility = \"hidden\"\n\ndocument.addEventListener(\"keydown\", function (e) {\n  if (e.code == \"KeyZ\") {\n    window.DEBUGGING = true\n    document.getElementById(\"debug\").style.visibility = \"visible\"\n    document.getElementById(\"debugjson\").style.visibility = \"visible\"\n  }\n})\n\ndocument.addEventListener(\"keydown\", function (e) {\n  if (e.code == \"KeyX\") {\n    window.DEBUGGING = true\n    window.DEBUGUTILS_REFRESH = false\n    document.getElementById(\"debug\").style.visibility = \"hidden\"\n    document.getElementById(\"debugjson\").style.visibility = \"hidden\"\n  }\n})\n"]}