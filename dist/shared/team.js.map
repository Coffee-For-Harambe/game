{"version":3,"sources":["team.js"],"names":["rebuildInfluenceGrid","buildGrid","Team","constructor","characters","setGame","game","forEach","character","setTeam","removeTheDead","filter","x","hp","update","influenceGrid","getInfluenceGrid","teamGrid","getTeamGrid","grid","y","getOpposingTeam"],"mappings":"AAAA,SAASA,oBAAT,EAA+BC,SAA/B,QAAgD,aAAhD;AACA,eAAe,MAAMC,IAAN,CAAW;AACxBC,EAAAA,WAAW,CAACC,UAAD,EAAa;AACtB,SAAKA,UAAL,GAAkBA,UAAlB;AACD;;AAEDC,EAAAA,OAAO,CAACC,IAAD,EAAO;AACZ,SAAKA,IAAL,GAAYA,IAAZ;AACA,SAAKF,UAAL,CAAgBG,OAAhB,CAAyBC,SAAD,IAAe;AACrCA,MAAAA,SAAS,CAACC,OAAV,CAAkB,IAAlB;AACD,KAFD;AAGD;;AAEDC,EAAAA,aAAa,GAAG;AACd,SAAKN,UAAL,GAAkB,KAAKA,UAAL,CAAgBO,MAAhB,CAAwBC,CAAD,IAAOA,CAAC,CAACC,EAAF,GAAO,CAArC,CAAlB;AACD;;AAEDC,EAAAA,MAAM,GAAG;AACP,SAAKJ,aAAL;AACA,SAAKK,aAAL,GAAqB,KAAKC,gBAAL,EAArB;AACA,SAAKC,QAAL,GAAgB,KAAKC,WAAL,EAAhB;AACD;;AAEDF,EAAAA,gBAAgB,GAAG;AACjB,WAAOhB,oBAAoB,CAAC,KAAKI,UAAN,CAA3B;AACD;;AAEDc,EAAAA,WAAW,GAAG;AACZ,UAAMC,IAAI,GAAGlB,SAAS,EAAtB;AACA,SAAKG,UAAL,CAAgBG,OAAhB,CAAyBC,SAAD,IAAe;AACrCW,MAAAA,IAAI,CAACX,SAAS,CAACY,CAAX,CAAJ,CAAkBZ,SAAS,CAACI,CAA5B,IAAiCJ,SAAjC;AACD,KAFD;AAIA,WAAOW,IAAP;AACD;;AAEDE,EAAAA,eAAe,GAAG;AAChB,WAAO,KAAKf,IAAL,CAAUe,eAAV,CAA0B,IAA1B,CAAP;AACD;;AArCuB","sourcesContent":["import { rebuildInfluenceGrid, buildGrid } from \"./gridutils\"\nexport default class Team {\n  constructor(characters) {\n    this.characters = characters\n  }\n\n  setGame(game) {\n    this.game = game\n    this.characters.forEach((character) => {\n      character.setTeam(this)\n    })\n  }\n\n  removeTheDead() {\n    this.characters = this.characters.filter((x) => x.hp > 0)\n  }\n\n  update() {\n    this.removeTheDead()\n    this.influenceGrid = this.getInfluenceGrid()\n    this.teamGrid = this.getTeamGrid()\n  }\n\n  getInfluenceGrid() {\n    return rebuildInfluenceGrid(this.characters)\n  }\n\n  getTeamGrid() {\n    const grid = buildGrid()\n    this.characters.forEach((character) => {\n      grid[character.y][character.x] = character\n    })\n\n    return grid\n  }\n\n  getOpposingTeam() {\n    return this.game.getOpposingTeam(this)\n  }\n}\n"]}